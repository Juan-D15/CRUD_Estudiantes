<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Cambiar contrase√±a ‚Äî Secretario</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/reset.css' %}">

  <!-- Estilos m√≠nimos inline para fuerza y el ‚Äúojo‚Äù -->
  <style>
    .strength { margin-top: 4px; font-size: 13px; }
    .strength.bad { color: #ff7b7b; }     /* rojo */
    .strength.mid { color: #f6c453; }     /* √°mbar */
    .strength.good{ color: #34d399; }     /* verde */

    .input-wrap{ position:relative; }
    .toggle-eye{
      position:absolute; top:50%; right:46px; transform:translateY(-50%);
      width:30px;height:30px; display:inline-flex; align-items:center; justify-content:center;
      border:1px solid rgba(255,255,255,0.35); border-radius:8px;
      background:transparent; color:rgba(255,255,255,0.95); cursor:pointer;
      transition:background .15s ease, border-color .15s ease;
    }
    .toggle-eye:hover{ background:rgba(255,255,255,0.08); border-color:rgba(255,255,255,0.6); }
    .toggle-eye svg{ width:18px; height:18px; fill:none; stroke:currentColor; stroke-width:2; }
    .hidden{ display:none; }
  </style>
</head>
<body data-role="secretaria">
  <div class="frame">
    <main class="wrap">
      <section class="card" aria-labelledby="title">
        <div class="badge" aria-hidden="true">
          <svg viewBox="0 0 24 24" width="30" height="30">
            <rect x="4" y="11" width="16" height="9" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M8 11V8a4 4 0 0 1 8 0v3" fill="none" stroke="currentColor" stroke-width="2"/>
          </svg>
        </div>

        <h1 id="title" class="title">Cambiar contrase√±a</h1>
        <p class="subtitle">Restablecer para <b>Secretario(a)</b></p>

        <form id="formReset" novalidate>
          <input type="hidden" id="token" name="token" value="{{ request.GET.t|default:'' }}">
          <input type="hidden" id="email" name="email" value="{{ request.GET.e|default:'' }}">

          <label class="label">Correo (no editable)</label>
          <div class="input-wrap readonly">
            <input id="emailView" type="text" readonly aria-readonly="true"
                   value="{{ request.GET.e|default:'' }}">
            <span class="icon">
              <svg viewBox="0 0 24 24"><path d="M4 6h16v12H4z" fill="none" stroke="currentColor" stroke-width="2"/><path d="M4 8l8 5 8-5" fill="none" stroke="currentColor" stroke-width="2"/></svg>
            </span>
          </div>

          <label class="label">Nueva contrase√±a</label>
          <div class="input-wrap">
            <input id="pwd1" type="password" placeholder="********" autocomplete="new-password" required>

            <!-- üëÅÔ∏è Mostrar/ocultar -->
            <button type="button" class="toggle-eye" aria-label="Mostrar contrase√±a" aria-pressed="false">
              <svg class="eye" viewBox="0 0 24 24">
                <path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              <svg class="eye-off hidden" viewBox="0 0 24 24">
                <path d="M17.94 17.94A10.94 10.94 0 0 1 12 19c-6 0-10-7-10-7a18.1 18.1 0 0 1 4.46-5.11"/>
                <path d="M9.9 4.24A10.94 10.94 0 0 1 12 5c6 0 10 7 10 7a18.1 18.1 0 0 1-3.11 3.89"/>
                <path d="M1 1l22 22"/>
              </svg>
            </button>

            <span class="icon">
              <svg viewBox="0 0 24 24"><rect x="4" y="11" width="16" height="9" rx="2" fill="none" stroke="currentColor" stroke-width="2"/><path d="M8 11V8a4 4 0 0 1 8 0v3" fill="none" stroke="currentColor" stroke-width="2"/></svg>
            </span>
          </div>
          <p class="err" id="e1"></p>
          <p class="strength" id="s1"></p>

          <label class="label">Confirmar nueva contrase√±a</label>
          <div class="input-wrap">
            <input id="pwd2" type="password" placeholder="********" autocomplete="new-password" required>

            <!-- üëÅÔ∏è Mostrar/ocultar -->
            <button type="button" class="toggle-eye" aria-label="Mostrar contrase√±a" aria-pressed="false">
              <svg class="eye" viewBox="0 0 24 24">
                <path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              <svg class="eye-off hidden" viewBox="0 0 24 24">
                <path d="M17.94 17.94A10.94 10.94 0 0 1 12 19c-6 0-10-7-10-7a18.1 18.1 0 0 1 4.46-5.11"/>
                <path d="M9.9 4.24A10.94 10.94 0 0 1 12 5c6 0 10 7 10 7a18.1 18.1 0 0 1-3.11 3.89"/>
                <path d="M1 1l22 22"/>
              </svg>
            </button>

            <span class="icon">
              <svg viewBox="0 0 24 24"><path d="M5 12l5 5L19 7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </span>
          </div>
          <p class="err" id="e2"></p>

          <button type="submit" class="btn-primary" id="btnChange">Cambiar contrase√±a</button>
        </form>

        <button class="btn-outline danger" id="btnCancel">Cancelar</button>
      </section>
    </main>
  </div>

  <script>
    /* Redirecci√≥n del flujo al terminar/cancelar */
    window.LOGIN_BACK_URL = "{% url 'secretario_login' %}";
  </script>
  <script src="{% static 'js/reset.js' %}"></script>
</body>
</html>
